import { Response } from 'undici';
import { NintendoAccountSessionAuthorisation, NintendoAccountToken, NintendoAccountUser } from './na.js';
import { ErrorResponse, HasResponse } from './util.js';
import { DailySummaries, Devices, MonthlySummaries, MonthlySummary, MoonError, ParentalControlSettingState, SmartDevices, User } from './moon-types.js';
export declare const ZNMA_CLIENT_ID = "54789befb391a838";
export default class MoonApi {
    token: string;
    naId: string;
    readonly znma_version: string;
    readonly znma_build: string;
    readonly znma_useragent: string;
    onTokenExpired: ((data?: MoonError, res?: Response) => Promise<MoonAuthData | PartialMoonAuthData | void>) | null;
    protected _token_expired: boolean;
    protected constructor(token: string, naId: string, znma_version?: string, znma_build?: string, znma_useragent?: string);
    fetch<T extends object>(url: string, method?: string, body?: string, headers?: object, 
    /** @internal */ _autoRenewToken?: boolean, 
    /** @internal */ _attempt?: number): Promise<HasResponse<T, Response>>;
    getUser(): Promise<HasResponse<User, Response>>;
    getSmartDevices(): Promise<HasResponse<SmartDevices, Response>>;
    getDevices(): Promise<HasResponse<Devices, Response>>;
    getDailySummaries(id: string): Promise<HasResponse<DailySummaries, Response>>;
    getMonthlySummaries(id: string): Promise<HasResponse<MonthlySummaries, Response>>;
    getMonthlySummary(id: string, month: string): Promise<HasResponse<MonthlySummary, Response>>;
    getParentalControlSettingState(id: string): Promise<HasResponse<ParentalControlSettingState, Response>>;
    renewToken(token: string): Promise<MoonAuthData>;
    private setTokenWithSavedToken;
    static createWithSessionToken(token: string): Promise<{
        moon: MoonApi;
        data: MoonAuthData;
    }>;
    static createWithSavedToken(data: MoonAuthData): MoonApi;
    static loginWithSessionToken(token: string): Promise<MoonAuthData>;
}
export declare class MoonErrorResponse extends ErrorResponse<MoonError> {
}
export declare class NintendoAccountSessionAuthorisationMoon extends NintendoAccountSessionAuthorisation {
    protected constructor(authorise_url: string, state: string, verifier: string, redirect_uri?: string);
    static create(/** @internal */ redirect_uri?: string): NintendoAccountSessionAuthorisationMoon;
}
export interface MoonAuthData {
    nintendoAccountToken: NintendoAccountToken;
    user: NintendoAccountUser;
    znma_version: string;
    znma_build: string;
    znma_useragent: string;
}
export interface PartialMoonAuthData {
    nintendoAccountToken: NintendoAccountToken;
}
